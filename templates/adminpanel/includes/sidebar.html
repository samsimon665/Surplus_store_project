<aside class="fixed left-0 top-0 z-40 flex h-screen w-64 flex-col bg-slate-100 text-slate-900">
    <!-- Inner card with border + light background -->
    <div class="m-3 flex h-[calc(100vh-1.5rem)] w-full flex-col
                rounded-3xl border border-slate-200 bg-[#f4f6f8] shadow-sm">

        <!-- Top logo area -->
        <div class="flex h-16 items-center gap-3 px-6">
            <div class="flex h-10 w-10 items-center justify-center rounded-2xl
                        bg-blue-100 text-blue-600 shadow-sm">
                <span class="material-symbols-outlined text-[22px]">inventory_2</span>
            </div>
            <div class="flex flex-col">
                <span class="text-sm font-semibold tracking-wide">
                    The Shop
                </span>
                <span class="text-[11px] text-slate-500">
                    Admin Panel
                </span>
            </div>
        </div>

        <!-- Main menu -->
        <nav id="sidebar-menu" class="mt-4 flex-1 overflow-y-auto px-4 pb-4 space-y-6">

            <!-- MAIN MENU label -->
            <div class="space-y-3">
                <p class="px-2 text-[11px] font-semibold tracking-[0.16em] text-slate-400">
                    MAIN MENU
                </p>

                <!-- Dashboard -->
                <a href="{% url 'adminpanel:dashboard' %}" class="flex items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold
                          text-slate-700 hover:bg-white hover:shadow-sm hover:text-slate-900
                          transition-all">
                    <span class="material-symbols-outlined text-[20px]">dashboard</span>
                    <span>Dashboard</span>
                </a>

                <!-- Customers -->
                <a href="{% url 'adminpanel:customers' %}" class="flex items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold
                          text-slate-700 hover:bg-white hover:shadow-sm hover:text-slate-900
                          transition-all">
                    <span class="material-symbols-outlined text-[20px]">group</span>
                    <span>Customers</span>
                </a>

                <!-- Products group -->
                <button type="button" id="products-toggle" class="sidebar-btn flex w-full items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold
                               text-slate-700 hover:bg-white hover:shadow-sm hover:text-slate-900
                               transition-all text-left">
                    <span class="material-symbols-outlined text-[20px]">inventory_2</span>
                    <span class="flex-1">Products</span>
                    <span class="material-symbols-outlined text-[18px] text-slate-500">
                        expand_more
                    </span>
                </button>

                <!-- Products submenu -->
                <div id="products-submenu" class="ml-6 mt-1 hidden flex-col gap-1.5 border-l border-slate-200 pl-3">

                    <a href="{% url 'adminpanel:category_list' %}" class="block rounded-md px-2 py-1.5 text-sm text-slate-600
                              hover:text-slate-900 hover:bg-blue-100">
                        Categories
                    </a>

                    <a href="{% url 'adminpanel:subcategory_list' %}" class="block rounded-md px-2 py-1.5 text-sm text-slate-600
                              hover:text-slate-900 hover:bg-blue-100">
                        Sub-Categories
                    </a>

                    <a href="{% url 'adminpanel:product_list' %}" class="block rounded-md px-2 py-1.5 text-sm text-slate-600
                              hover:text-slate-900 hover:bg-blue-100">
                        Products
                    </a>
                </div>

                <!-- Promo -->
                <a href="{% url 'adminpanel:promo_list' %}" class="flex items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold
                          text-slate-700 hover:bg-white hover:shadow-sm hover:text-slate-900
                          transition-all">
                    <span class="material-symbols-outlined text-[20px]">shopping_cart</span>
                    <span>Promo</span>
                </a>

                <!-- Orders -->
                <a href="#" class="flex items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold
                          text-slate-700 hover:bg-white hover:shadow-sm hover:text-slate-900
                          transition-all">
                    <span class="material-symbols-outlined text-[20px]">shopping_cart</span>
                    <span>Orders</span>
                </a>

                <!-- Analytics -->
                <a href="#" class="flex items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold
                          text-slate-700 hover:bg-white hover:shadow-sm hover:text-slate-900
                          transition-all">
                    <span class="material-symbols-outlined text-[20px]">bar_chart</span>
                    <span>Analytics</span>
                </a>
            </div>

            <!-- SETTINGS block -->
            <div class="space-y-3">
                <p class="px-2 text-[11px] font-semibold tracking-[0.16em] text-slate-400">
                    SETTINGS
                </p>

                <a href="#" class="flex items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold
                          text-slate-700 hover:bg-white hover:shadow-sm hover:text-slate-900
                          transition-all">
                    <span class="material-symbols-outlined text-[20px]">settings</span>
                    <span>General</span>
                </a>

                <!-- Manage FAQs -->
                <a href="#" class="flex items-center gap-3 rounded-xl px-3 py-2.5 text-sm font-semibold
                              text-slate-700 hover:bg-white hover:shadow-sm hover:text-slate-900
                              transition-all">
                    <span class="material-symbols-outlined text-[20px]">help_center</span>
                    <span>Manage FAQs</span>
                </a>

            </div>
        </nav>

        <!-- Bottom profile + logout -->
        <div class="mt-auto px-4 pb-4 space-y-3">
            <div class="flex items-center gap-3 rounded-2xl bg-white px-3 py-2.5 shadow-sm">
                {% if request.user.profile.profile_pic %}
                <div class="h-9 w-9 rounded-full bg-cover bg-center"
                    style="background-image: url('{{ request.user.profile.profile_pic.url }}');"></div>
                {% else %}
                <div
                    class="h-9 w-9 rounded-full bg-slate-800 text-white flex items-center justify-center text-xs font-semibold">
                    {{ request.user.first_name|default:request.user.username|first|upper }}
                </div>
                {% endif %}
                <div class="flex-1">
                    <p class="text-xs font-semibold">
                        {{ request.user.get_full_name|default:request.user.username }}
                    </p>
                    <p class="text-[11px] text-slate-500">Admin</p>
                </div>
            </div>

            <form action="{% url 'adminpanel:logout' %}" method="POST">
                {% csrf_token %}
                <button class="flex h-10 w-full items-center justify-center gap-2
                           rounded-xl bg-white px-4 text-sm font-semibold text-slate-800
                           border border-slate-200 hover:bg-red-600 hover:text-white hover:border-red-600
                           transition-all">
                    <span class="material-symbols-outlined text-[18px]">logout</span>
                    <span>Logout</span>
                </button>
            </form>
        </div>
    </div>
</aside>

<style>
    .active-sidebar-item {
        background: #dbeafe !important;
        /* blue-100 */
        color: #0f172a !important;
    }

    .active-sidebar-item span,
    .active-sidebar-item p {
        color: #0f172a !important;
    }

    .sidebar-btn.active-sidebar-item .material-symbols-outlined:last-child {
        transform: rotate(180deg);
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const sidebarItems = document.querySelectorAll(
            "#sidebar-menu a, #products-toggle"
        );

        function clearActive() {
            sidebarItems.forEach(item => {
                item.classList.remove("active-sidebar-item");
            });
        }

        const current = window.location.pathname;

        document.querySelectorAll("#sidebar-menu a").forEach(link => {
            if (link.getAttribute("href") === current) {
                clearActive();
                link.classList.add("active-sidebar-item");
            }
        });

        const productsToggle = document.getElementById("products-toggle");
        const productsSubmenu = document.getElementById("products-submenu");

        const productPaths = [
            "{% url 'adminpanel:category_list' %}",
            "{% url 'adminpanel:subcategory_list' %}",
            "{% url 'adminpanel:product_list' %}",
        ];

        if (productPaths.includes(current) && productsSubmenu && productsToggle) {
            productsSubmenu.classList.remove("hidden");
            productsToggle.classList.add("active-sidebar-item");
        }

        if (productsToggle && productsSubmenu) {
            productsToggle.addEventListener("click", () => {
                productsToggle.classList.toggle("active-sidebar-item");
                productsSubmenu.classList.toggle("hidden");
            });
        }
    });
</script>