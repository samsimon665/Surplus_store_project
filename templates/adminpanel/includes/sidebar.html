<aside class="fixed left-0 top-0 z-40 flex h-screen w-64 flex-col
             border-r border-slate-200 bg-white
             dark:border-slate-800 dark:bg-slate-900 shrink-0">


    <!-- ================= LOGO ================= -->
    <div class="flex h-16 items-center gap-3 px-6 border-b border-slate-100 dark:border-slate-800">
        <div class="flex items-center justify-center rounded-lg bg-primary/10 p-2">
            <span class="material-symbols-outlined text-primary text-2xl">grid_view</span>
        </div>
        <div class="flex flex-col">
            <h1 class="text-sm font-bold leading-none text-slate-900 dark:text-white">
                The Shop
            </h1>
            <p class="text-xs text-slate-500 dark:text-slate-400">
                Admin Panel
            </p>
        </div>
    </div>

    <!-- ================= NAV ================= -->
    <nav id="sidebar-menu" class="flex-1 overflow-y-auto px-4 py-6">
        <ul class="space-y-1">

            <!-- Dashboard -->
            <li>
                <a href="{% url 'adminpanel:dashboard' %}" class="flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium
                          text-slate-600 hover:bg-slate-50 hover:text-slate-900
                          dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-white transition-colors">
                    <span class="material-symbols-outlined text-[20px]">dashboard</span>
                    Dashboard
                </a>
            </li>

            <!-- Customers -->
            <li>
                <a href="{% url 'adminpanel:customers' %}"
                    class="flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium
                                      text-slate-600 hover:bg-slate-50 hover:text-slate-900
                                      dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-white transition-colors">
                    <span class="material-symbols-outlined text-[20px]">group</span>
                    Customers
                </a>
            </li>





            <!-- Products (Toggle) -->
            <li>
                <button type="button" id="products-toggle" class="sidebar-btn flex w-full items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium
                           text-slate-600 hover:bg-slate-50 hover:text-slate-900
                           dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-white
                           transition-colors text-left">


                    <span class="material-symbols-outlined text-[20px]">inventory_2</span>
                    Products
                </button>

                <!-- Products Submenu -->
                <div id="products-submenu" class="ml-9 mt-1 hidden flex-col gap-1
                                       border-l-2 border-slate-100 dark:border-slate-800 pl-3">

                    <a href="{% url 'adminpanel:category_list' %}"
                        class="block py-1 text-sm text-slate-500 hover:text-primary dark:text-slate-400">
                        Categories
                    </a>

                    <a href="{% url 'adminpanel:subcategory_list' %}"
                        class="block py-1 text-sm font-medium text-primary dark:text-blue-300">
                        Sub-Categories
                    </a>

                    <a href="#" class="block py-1 text-sm text-slate-500 hover:text-primary dark:text-slate-400">
                        Inventory
                    </a>
                </div>
            </li>

            <!-- Orders -->
            <li>
                <a href="#" class="flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium
                          text-slate-600 hover:bg-slate-50 hover:text-slate-900
                          dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-white transition-colors">
                    <span class="material-symbols-outlined text-[20px]">shopping_cart</span>
                    Orders
                </a>
            </li>


            <!-- Analytics -->
            <li>
                <a href="#" class="flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium
                          text-slate-600 hover:bg-slate-50 hover:text-slate-900
                          dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-white transition-colors">
                    <span class="material-symbols-outlined text-[20px]">bar_chart</span>
                    Analytics
                </a>
            </li>

            <!-- Settings -->
            <li class="pt-4 mt-4 border-t border-slate-100 dark:border-slate-800">
                <span class="px-3 text-xs font-semibold uppercase tracking-wider
                             text-slate-400 dark:text-slate-500">
                    Settings
                </span>
            </li>

            <li>
                <a href="#" class="flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium
                          text-slate-600 hover:bg-slate-50 hover:text-slate-900
                          dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-white transition-colors">
                    <span class="material-symbols-outlined text-[20px]">settings</span>
                    General
                </a>
            </li>

        </ul>
    </nav>

    <!-- ================= LOGOUT (UNCHANGED) ================= -->
    <div class="mt-auto p-4 border-t border-slate-100 dark:border-slate-800">
        <form action="{% url 'adminpanel:logout' %}" method="POST">
            {% csrf_token %}
            <button class="flex h-12 w-full cursor-pointer items-center justify-center gap-2
                           rounded-xl bg-white px-6 text-base font-semibold text-black
                           border border-slate-300 transition-all duration-200
                           hover:bg-black hover:text-white
                           dark:bg-slate-100 dark:text-black">

                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1m0
                             0a1 1 0 01-1 1H6a2 2 0 01-2-2V7a2 2 0 012-2h6a1 1 0 011 1v1" />
                </svg>

                <span>Logout</span>
            </button>
        </form>
    </div>
</aside>

<style>
    /* ===============================
       ACTIVE SIDEBAR ITEM (links + buttons)
       =============================== */
    .active-sidebar-item {
        background: #e8f0fe !important;
        /* light blue */
        color: #1a73e8 !important;
        /* google blue */
    }

    .active-sidebar-item span,
    .active-sidebar-item p {
        color: #1a73e8 !important;
    }

    /* ===============================
       PRODUCTS BUTTON HOVER + ACTIVE
       =============================== */
    .sidebar-btn:hover,
    .sidebar-btn.active-sidebar-item {
        background: #e8f0fe;
        color: #1a73e8;
    }

    .sidebar-btn:hover span,
    .sidebar-btn.active-sidebar-item span {
        color: #1a73e8;
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", () => {

        const sidebarItems = document.querySelectorAll(
            "#sidebar-menu a, #products-toggle"
        );

        /* ===============================
           RESET ALL ACTIVE STATES
           =============================== */
        function clearActive() {
            sidebarItems.forEach(item => {
                item.classList.remove("active-sidebar-item");
            });
        }

        /* ===============================
           URL-BASED ACTIVE (ON PAGE LOAD)
           =============================== */
        const current = window.location.pathname;

        document.querySelectorAll("#sidebar-menu a").forEach(link => {
            if (link.getAttribute("href") === current) {
                clearActive();
                link.classList.add("active-sidebar-item");
            }
        });

        /* ===============================
           PRODUCTS SUBMENU TOGGLE
           =============================== */
        const productsToggle = document.getElementById("products-toggle");
        const productsSubmenu = document.getElementById("products-submenu");

        if (productsToggle && productsSubmenu) {
            productsToggle.addEventListener("click", () => {
                clearActive(); // ðŸ”‘ THIS IS THE FIX
                productsToggle.classList.add("active-sidebar-item");
                productsSubmenu.classList.toggle("hidden");
            });
        }

    });
</script>